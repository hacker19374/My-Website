<!DOCTYPE html>
<html>
  <head>
    <script>
    
    var newItem
    var a
    var p = ""
    var randGen = ""
    var amoun = 11;
    var inte
    var u = 0
    var checked = 0;
    var chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_"
    
    
    function chec() {
      checked++
      document.getElementById("checked").innerHTML = "Links Checked: " + checked;
      p = ""
        for (i = 0; i < amoun; i++) {
          p += chars.charAt(Math.floor(Math.random() * 64))
        }
        randGen = p;
  const proxyUrl = 'https://cors-anywhere.herokuapp.com/' + "https://mply.io/" + randGen; // Proxy URL
  fetch(proxyUrl, { method: 'HEAD' }) // Use HEAD method
    .then(response => {
      if (!response.ok) {
        // Check if the response body contains the text of the custom 404 page
        response.text().then(text => {
          if (text.includes('404: Page Not Found')) {
            console.log('URL returns a custom 404 page');
          } else {
            console.log('URL returns a 404 error');
            if (inte) {
              chec()
            }
          }
        });
      } else {
        console.log('URL is reachable');
        a = document.createElement("a")
        a.href = "https://mply.io/" + randGen
        a.target = "_blank"
        a.appendChild(document.createTextNode("https://mply.io/" + randGen))
        newItem = document.createElement("li")
        newItem.appendChild(a);
        document.getElementById("list").appendChild(newItem);
        if (inte) {
          chec()
        }
      }
    })
    .catch(error => {
      console.log('Error:', error);
    });
    console.log(randGen)
}

function sett() {
  if (!inte) {
    inte = true
    chec()
    document.getElementById("test").innerHTML = "Click to stop..."
  } else {
    inte = false
    document.getElementById("test").innerHTML = "Test"
  }
}

function changeAmount() {
  if (amoun == 11) {
    amoun = 6
  } else if (amoun == 6) {
    amoun = 11
  }
}

    </script>
  </head>
  <body>
    <h1>Monopoly Free Dice</h1>
    <div id="result">
      <h3>Working Links:</h3>
      <br>
      <ul id="list">
        <li>
          <a href="https://mply.io/gt5hzQ">https://mply.io/gt5hzQ</a>
        </li>
      </ul>
      <h3 id="checked">Links Checked: 0</h3>
    </div>
    <br>
    <button id="test" onclick="sett()">Test</button> <button onclick="changeAmount()">Toggle Length</button>
    <br>
    <p>I made this small little website to test out some coding things I had an idea for. To start the program, click test, and the website will run through as many links as possible and try to find free dice. This may additionally give friend request links though.<br><br>You will also need to go to <a href="https://cors-anywhere.herokuapp.com/">this link</a> and click request demo access for this website to work.</p>
    <script>var result = document.getElementById("result")</script>
  </body>
</html>
